<div class="card">
  <div class="row">
    <div class="col-md-6">
      <h5 class="card-header">Doctor Orders List</h5>
    </div>
    
   
  </div>
      <div class="table-responsive text-nowrap">
        <p-table class="table table-bordered" #dt1 [value]="items" dataKey="id" [rowHover]="true"
        [showCurrentPageReport]="true" [loading]="loading" [paginator]="true"
        [rows]="limit"
        [totalRecords]="totalPages" [lazy]="true" (onLazyLoad)="onPageChange($event)"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [filterDelay]="0"
        [globalFilterFields]="['order_random_id', 'order_date','patient_name', 'patient_mobile_no',  'amount','no_of_tests','order_status','payment_status','status']">
        <ng-template pTemplate="caption">
          <div class="flex justify-content-between">
            <p-button [outlined]="true" icon="pi pi-filter-slash" label="Clear" (onClick)="clear()" />
            <p-iconField iconPosition="left" style="float: right;">
              <p-inputIcon>
                <i class="pi pi-search"></i>
              </p-inputIcon>
              <input pInputText type="text" [(ngModel)]="searchValue" (input)="filterGlobal($event)"
                placeholder="Keyboard Search" />
            </p-iconField>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <!-- <tr>
            <th pSortableColumn="order_random_id">
             Order Number <p-sortIcon field="order_random_id" />
          </th>
          <th pSortableColumn="order_date">
            Oder Date <p-sortIcon field="order_date" />
            </th>
            <th pSortableColumn="patient_name">
              Order By<p-sortIcon field="patient_name" />
            </th>
        
            <th pSortableColumn="patient_mobile_no">
             Mobile Number <p-sortIcon field="patient_mobile_no" />
            </th>
            
            <th pSortableColumn="amount">
                Amount <p-sortIcon field="amount" />
            </th>
            <th pSortableColumn="doctor_name">
              Doctor Name <p-sortIcon field="doctor_name" />
            </th>
            <th pSortableColumn="order_status">
             Order Status <p-sortIcon field="order_status" />
          </th>
          <th pSortableColumn="payment_status">
            Payment Status <p-sortIcon field="payment_status" />
        </th>
          
            <th>Action</th>
          </tr> -->
          <tr>
            <th (click)="onSort('order_random_id')">
              Order Number <i [ngClass]="getSortIcon('order_random_id')"></i>
            </th>
            <th (click)="onSort('order_date')">
              Oder Date <i [ngClass]="getSortIcon('order_date')"></i>
            </th>
            <th (click)="onSort('patient_name')">
              Order By <i [ngClass]="getSortIcon('patient_name')"></i>
            </th>
            <th (click)="onSort('patient_mobile_no')">
              Mobile No <i [ngClass]="getSortIcon('patient_mobile_no')"></i>
            </th>
            <th (click)="onSort('amount')">
              Amount <i [ngClass]="getSortIcon('amount')"></i>
            </th>
            <th (click)="onSort('doctor_name')">
              Doctor Name <i [ngClass]="getSortIcon('doctor_name')"></i>
            </th>
            <th (click)="onSort('order_status')">
              Order Status  <i [ngClass]="getSortIcon('order_status')"></i>
            </th>
            <th (click)="onSort('payment_status')">
              Payment Status <i [ngClass]="getSortIcon('payment_status')"></i>
            </th>
            <th>Action</th>
          </tr>
          <!-- <tr>
             <th>
              <p-columnFilter
                type="text"
                field="order_random_id"
                placeholder="Search by Id"
                ariaLabel="Filter Country"
              />
            </th>
            <th>
              <p-columnFilter
                type="text"
                field="order_date"
                placeholder="Search by Date"
                ariaLabel="Filter Country"
              />
            </th>
            <th>
              <p-columnFilter
                type="text"
                field="patient_name"
                placeholder="Search by Name"
                ariaLabel="Filter Name"
              />
            </th>
           
            <th>
              <p-columnFilter
                type="text"
                field="patient_mobile_no"
                placeholder="Search by Mobile No"
                ariaLabel="Filter Country"
              />
            </th>
            
            <th>
                <p-columnFilter
                  type="text"
                  field="amount"
                  placeholder="Search by Number"
                  ariaLabel="Filter Country"
                />
              </th>
              <th>
                <p-columnFilter
                  type="text"
                  field="doctor_name"
                  placeholder="Search by Name"
                  ariaLabel="Filter Country"
                />
              </th>
             <th>
                <p-columnFilter
                  type="text"
                  field="order_status"
                  placeholder="Search by Number"
                  ariaLabel="Filter Country"
                />
              </th> -->
              <!-- <th>
                <p-columnFilter field="order_status" matchMode="equals" [showMenu]="false">
                  <ng-template
                    pTemplate="filter"
                    let-value
                    let-filter="filterCallback"
                  >
                    <p-dropdown
                      [ngModel]="value"
                      [options]="orderstatus"
                      (onChange)="filter($event.value)"
                      placeholder="Select One"
                      [showClear]="true"
                    >
                      <ng-template let-option pTemplate="item">
                        <p-tag
                          [value]="option.value"
                        
                        />
                      </ng-template>
                    </p-dropdown>
                  </ng-template>
                </p-columnFilter>
              </th> -->
              <!-- <th>
                <p-columnFilter
                  type="text"
                  field="payment_status"
                  placeholder="Search by Number"
                  ariaLabel="Filter Country"
                />
              </th> -->
              <!-- <th>
                <p-columnFilter field="payment_status" matchMode="equals" [showMenu]="false">
                    <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                        <p-dropdown 
                            [ngModel]="value" 
                            [options]="paymentstatus"
                            (onChange)="filter($event.value)" 
                            placeholder="Select One" 
                            [showClear]="true">
                                <ng-template let-option pTemplate="item">
                                    <p-tag 
                                        [value]="option.value" 
                                        [severity]="getPaymentstatus(option.label)" />
                                </ng-template>
                        </p-dropdown>
                    </ng-template>
                </p-columnFilter>
            </th> -->
              
            <!-- <th>
              <p-columnFilter
                type="text"
                field="status"
                placeholder="Search by Status"
                ariaLabel="Filter Country"
              />
            </th> 
           </tr> -->
        </ng-template>
        <ng-template pTemplate="body" let-row>
          <tr [pSelectableRow]="row">
          
       <td>
              <span class="p-column-title">Order Number</span>
              <span class="ml-1 vertical-align-middle">{{ row.order_random_id}}</span>
            </td>
            <td>
              <span class="p-column-title">Order Date</span>
              <span class="ml-1 vertical-align-middle">{{ row.order_date}}</span>
            </td>
            <td >
              <span class="p-column-title">Order By</span>
              
              {{ row.patient_name }}
            </td>
            <!-- <td>
              <span class="p-column-title">Email</span>
              <span class="ml-1 vertical-align-middle">{{ row.user_id}}</span>
            </td> -->
            <td>
              <span class="p-column-title">Mobile No</span>
              <span class="ml-1 vertical-align-middle">{{ row.patient_mobile_no}}</span>
            </td>
            
            <td>
                <span class="p-column-title">Amount</span>
                <span class="ml-1 vertical-align-middle">{{ row.amount}}</span>
            </td>
            <td>
                <span class="p-column-title">No of Tests</span>
                <span class="ml-1 vertical-align-middle">{{ row.doctor_name}}</span>
              </td>
              <td>
                <span class="p-column-title">Order Status</span>
                <span class="ml-1 vertical-align-middle">{{ row.order_status}}</span>
              </td>
              <td>
              
                <p-tag 
                
                    [value]="row.payment_status" 
                    [severity]="getPaymentstatus(row.payment_status)" />
              </td>
            <!-- <td>
              <span class="p-column-title">Status</span>
              <p-tag [value]="row.status" [severity]="getSeverity(row.status)" />
            </td> -->
           
            <td >
              <div style="display: flex;" >
               
                <a href="javascript:void(0);" class="custom-badge status-green" 
         
               
                (click)="showOrdersData(row.id)">View</a>
                
              </div>
            </td>
           
          </tr>
            <!-- <tr *ngIf="loading">
              <td colspan="5" class="text-center py-5">
                <span class="spinner-border spinner-border-lg align-center"></span>
              </td>
            </tr> -->
         
        </ng-template>
     
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="4">No customers found.</td>
          </tr>
        </ng-template>
      </p-table>
       
        
      </div>
    </div>
    
  
  
  
  <!-- removeItemModal -->
  <ng-template #deleteModel let-modal>
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="btn-close"
          (click)="modal.dismiss('Cross click')"></button>
      </div>
      <div class="modal-body">
        <div class="mt-2 text-center">
          <lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop"
            colors="primary:#f7b84b,secondary:#f06548" style="width:100px;height:100px" />
          <div class="mt-4 pt-2 fs-15 mx-4 mx-sm-5">
            <h4>Are you Sure ?</h4>
            <p class="text-muted mx-4 mb-0">Are you Sure You want to Remove this Product ?</p>
          </div>
        </div>
        <div class="d-flex gap-2 justify-content-center mt-4 mb-2">
          <button type="button" class="btn w-sm btn-light" data-bs-dismiss="modal"
            (click)="modal.close('Close click')">Close</button>
          <button type="button" class="btn w-sm btn-danger " id="delete-product" (click)="deleteData(deleteId)"
            (click)="modal.close('Close click')">Yes, Delete It!</button>
        </div>
      </div>
    </div><!-- /.modal-content -->
  </ng-template>
  
  
  
  

